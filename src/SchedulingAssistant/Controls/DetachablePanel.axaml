<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             x:Class="SchedulingAssistant.Controls.DetachablePanel"
             x:Name="Root">

    <Border BorderBrush="{StaticResource ChromeBorder}" BorderThickness="1">
        <Grid RowDefinitions="Auto,*">

            <!-- Panel header bar -->
            <Border Grid.Row="0" Background="{StaticResource ChromeBackground}"
                    BorderBrush="{StaticResource ChromeBorder}" BorderThickness="0,0,0,1"
                    Padding="8,4">
                <DockPanel>
                    <Button DockPanel.Dock="Right"
                            Content="⧉"
                            ToolTip.Tip="Pop out into window"
                            Click="OnDetachClicked"
                            Padding="4,2"
                            Background="Transparent"
                            BorderThickness="0"
                            FontSize="13"
                            Cursor="Hand" />
                    <!-- Extra controls injected by the host (e.g. Add/Edit/Delete for Sections) — right-aligned -->
                    <ContentPresenter DockPanel.Dock="Right"
                                      Content="{Binding #Root.HeaderExtra}"
                                      VerticalAlignment="Center"
                                      Margin="0,0,4,0" />
                    <!-- Panel title -->
                    <TextBlock Text="{Binding #Root.Header}"
                               FontWeight="SemiBold"
                               FontSize="13"
                               VerticalAlignment="Center" />
                    <!-- Context info (semester, stats, filter) — left-justified after title -->
                    <ContentPresenter Content="{Binding #Root.HeaderContext}"
                                      VerticalAlignment="Center" />
                </DockPanel>
            </Border>

            <!-- Panel content -->
            <ContentPresenter Grid.Row="1"
                              Content="{Binding #Root.PanelContent}" />

        </Grid>
    </Border>

</UserControl>
